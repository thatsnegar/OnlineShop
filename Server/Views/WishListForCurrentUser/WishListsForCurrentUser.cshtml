@model IEnumerable<ViewModels.ProfileDetails.WishListViewModel>

@{
	Layout = "~/Views/Shared/Layout/_ProfileDetails.cshtml";
}

<div class="col-12 col-xl-9 container-content-account">

	@*Header*@
	<partial name="~/Views/Shared/PartialViews/ProfileDetails/_ProfileHeader.cshtml" />
	<div class=" container container-2xl">
		<div class="account-content content-favorits-account">
			@*page Title*@
			<div class="header-tab-content-account mb-4">
				<h1 class="title-tabcontent-account me-2">
					علاقه مندی ها
				</h1>
			</div>

			<div class="main-content-account">
				<div class="row">
					@if (Model.Any())
					{
						foreach (var item in Model)
						{
							<div class="col-12 col-sm-6 col-md-4 mb_col_productNew d-flex justify-content-center">
								<div class="product_cart product-cart-account">
									<a class="card-floating-icon" onclick="RemoveFromWishList('@item.ProductId')">
										<i class="fas fa-trash-alt"></i>
									</a>
									@if (item.HasDiscount)
									{
										<div class="off">
											<span>
												@(item.DiscountPercentage)% تخفیف
											</span>
										</div>
									}
									<div class="cart-img-product mb-3">
										<a asp-controller="Products" asp-action="Details" asp-route-productId="@(item.ProductId)">
											<div class="d-flex justify-content-center align-items-center h-100">
												<img src="~/emoniFiles/Products/@(item.ImageProductName)" class="img1-product img-fluid" />
											</div>
										</a>
										<div class="area-button-view-product">
											<a class="button-view-product" asp-controller="Products" asp-action="Details" asp-route-productId="@(item.ProductId)">
												مشاهده محصول
											</a>
											<a class="add-to-cart" asp-controller="Order" asp-action="Add">
												+
											</a>
										</div>
									</div>
									<div class="content_product text-center">
										@if (item.HasDiscount)
										{
											<div class="price_card_product mb-2">
												<del class="me-1">
													@(item.Price)
												</del>
												@(item.DiscountedPrice) تومان
											</div>
										}
										else
										{
											<div class="price_card_product mb-2">
												@(item.Price) تومان
											</div>
										}
										<a asp-controller="Products" asp-action="Details" asp-route-productId="@(item.ProductId)">
											<h3 class="title-product mb-2">
												@(item.Title)
											</h3>
										</a>

										@*Rating*@
										<div class="star_rating">
											<span class="star-icon star-icon-active">
												<i class="far fa-star"></i>
											</span>
											<span class="star-icon star-icon-active">
												<i class="far fa-star"></i>
											</span>
											<span class="star-icon star-icon-active">
												<i class="far fa-star"></i>
											</span>
											<span class="star-icon star-icon-active">
												<i class="far fa-star"></i>
											</span>
											<span class="star-icon star-icon-active">
												<i class="far fa-star"></i>
											</span>
										</div>
									</div>
								</div>
							</div>
						}
					}
					else
					{
						<div class="col-12 col-sm-6 col-md-4 mb_col_productNew d-flex justify-content-center">
							<div class="product_cart product-cart-account">
							</div>
						</div>

						<div class="col-12 col-sm-6 col-md-4 mb_col_productNew d-flex justify-content-center">
							<div class="product_cart product-cart-account">
								<div class="content_product text-center">
									<div class="row justify-content-center">
										<div class="col-12 col-sm-6 col-md-4 mb_col_productNew d-flex justify-content-center">
											<img src="~/assets/img/Business team looking for new people.jpg" alt="nothing-in-wishList" width="300px">
										</div>
									</div>
									<div class="row justify-content-center">
										<h3 style="text-align: center;">
											هیج آیتمی یافت نشد!
										</h3>
									</div>
								</div>
							</div>
						</div>
					}
				</div>
			</div>
		</div>
	</div>
</div>

@section Scripts
	{
	<script>
		function RemoveFromWishList(itemProductId) {
			$.ajax
				({
					type: 'post',
					url: '@Url.Action("RemoveFromWishList")',
					data:
					{
						id: itemProductId
					},
					success: function(data) {
						window.location.href = "/WishListForCurrentUser/WishListsForCurrentUser";
					},
					error: function(err) {
						alert("!عملیات موفق نبود")
					}
				});
		};
	</script>
}

